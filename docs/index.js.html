<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>index.js - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Constructor.html">Constructor</a></li><li><a href="Horloge.html">Horloge</a></li></ul><h3>Global</h3><ul><li><a href="global.html#log">log</a></li><li><a href="global.html#raw">raw</a></li><li><a href="global.html#reset">reset</a></li><li><a href="global.html#start">start</a></li><li><a href="global.html#stop">stop</a></li><li><a href="global.html#stopAndLog">stopAndLog</a></li><li><a href="global.html#toMs">toMs</a></li><li><a href="global.html#toString">toString</a></li><li><a href="global.html#wrapFunction">wrapFunction</a></li><li><a href="global.html#wrapPromise">wrapPromise</a></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">index.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>const ms = require('ms');

/**
 * @class Horloge
 * @constructor Constructor
 * @example
 * ```
 * const Horloge = require('horloge');
 * // Using an async function so we can use await
 * (async () => {
 * 	const delay = duration =>
 * 		new Promise(resolve => setTimeout(resolve, duration));
 *
 * 	let t = new Horloge();
 * 	t.start();
 * 	await delay(1000);
 * 	t.stop();
 *
 * 	t.log(); // Timer took ~1000 ms
 * })();
 * ```
 */
class Horloge {
	/**
   * @constructor
   * @param options {Object} Options object
   * @note options.ms may contain options for the `ms` library
   */
	constructor(options) {
		this.options = options;
		if (!this.options.ms) {
			this.options.me = {};
		}
		this.reset();
	}

	/**
   * Initialises start and end times to null
   * @method reset
   *
   */
	reset() {
		this.startTime = null;
		this.endTime = null;
	}

	/**
   * Records the start time
   * @method start
   */
	start() {
		this.startTime = Date.now();
	}

	/**
   * Records the end time and sets the difference
   * @method stop
   */
	stop() {
		this.endTime = Date.now();
		this.difference = this.endTime - this.startTime;
	}

	/**
   * Override for the toString method
   * @method toString
   */
	toString() {
		let difference;
		if (this.options &amp;&amp; this.options.ms) {
			difference = this.toMs(this.difference);
		} else {
			difference = `${this.difference} ms`;
		}
		return `Timer took ${difference}`;
	}

	/**
   * Convert time in milliseconds to a readable format, with provided options
   * @method toMs
   * @returns {String} Readable time with unit
   */
	toMs(val) {
		return ms(val, this.options.ms);
	}

  /**
   * Log the Horloge instance
   * @method log
   */
	log() {
		console.log(this.toString());
	}

  /**
   * Convenience function to stop the timer and log the result
   * @method stopAndLog
   */
	stopAndLog() {
		this.stop();
		this.log();
	}

  /**
   * Wraps a function with a callback and calls it, recording start and end time
   * @method wrapFunction
   * @param fn {Function} The function to wrap
   * @param callback  {Function} Callback to call when `fn` finishes
   * @returns {Horloge} An Horloge instance
   */
	static wrapFunction(fn, callback) {
		const h = new Horloge(this.options);
		h.start();
		fn(() => {
			h.stop();
			callback(null, h);
		});
	}

  /**
   * Wraps a promise and calls it, recording start and end time
   * @method wrapPromise
   * @param p {Promise} The promise to wrap
   * @returns {Horloge} An Horloge instance
   */
	static async wrapPromise(p) {
		const h = new Horloge(this.options);
		h.start();
		await p();
		h.stop();
		return h;
	}

  /**
   * Returns the raw values for start, end and (optionally) the difference between the two
   * @method raw
   * @returns {Object} raw
   */
	raw() {
		const raw = {
			start: this.startTime,
			end: this.endTime
		};

		if (this.difference) {
			Object.assign(raw, {difference: this.difference});
		}

		return raw;
	}
}

module.exports = Horloge;
</code></pre>
        </article>
    </section>




</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Wed Oct 25 2017 13:30:02 GMT+0200 (CEST) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>
